<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Интерактивный Персонаж</title>
    <style>
        body {
            margin: 0; height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background-color: #1a1a2e;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden; /* Скрываем полосы прокрутки при анимации */
        }

        .container {
            position: relative;
            width: 800px; height: 800px;
            cursor: pointer;
        }

        /* Основное изображение */
        .character-image {
            width: 100%; height: auto;
            display: block;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            /* Добавляем плавность переходов */
            transition: transform 0.2s ease-in-out;
        }

        /* --- НОВОЕ: Класс для анимации разговора --- */
        .is-talking {
            /* Запускаем анимацию "talking-bob" бесконечно, пока есть этот класс */
            animation: talking-bob 0.6s infinite ease-in-out;
        }

        /* --- НОВОЕ: Сама анимация (легкое покачивание и увеличение) --- */
        @keyframes talking-bob {
            0% { transform: scale(1) translateY(0); }
            50% { transform: scale(1.02) translateY(-5px); } /* Чуть вверх и больше */
            100% { transform: scale(1) translateY(0); }
        }
        /* ----------------------------------------- */

        .speech-bubble {
            position: absolute;
            top: 105px; left: 530px;
            width: 220px; height: 100px;
            background: transparent;
            color: #333;
            font-size: 22px; /* Чуть увеличил шрифт для читаемости */
            line-height: 1.3;
            font-weight: 600;
            overflow: hidden;
            display: flex; align-items: flex-start;
            padding: 5px;
        }

        #typed-text::after {
            content: '|'; opacity: 1;
            animation: blink 0.7s infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>

<div class="container" onclick="startTyping()">
    <img id="char-img" src="Character1.png" alt="Персонаж" class="character-image">
    
    <div class="speech-bubble">
        <span id="typed-text"></span>
    </div>
</div>

<script>
    const phrases = [
        "Драсте, я робот ведьма. Морана.",
        "Смит гадина меня сюда засунул. Теперь кукую тут.",
        "Он хочет превратить меня в робота. Колдует с ИИ.",
        "Скоро я буду танцевать, и хлопать в ладоши. А позже и пивка подвезут.!"
    ];

    let currentPhraseIndex = 0;
    let isTyping = false;

    function startTyping() {
        if (isTyping) return;
        
        isTyping = true;
        const textElement = document.getElementById('typed-text');
        // НОВОЕ: Находим картинку по ID
        const charImage = document.getElementById('char-img');
        
        textElement.innerHTML = '';

        // НОВОЕ: Добавляем класс анимации -> картинка начинает двигаться
        charImage.classList.add('is-talking');

        let phrase = phrases[currentPhraseIndex];
        let charIndex = 0;

        function typeChar() {
            if (charIndex < phrase.length) {
                textElement.innerHTML += phrase.charAt(charIndex);
                charIndex++;
                setTimeout(typeChar, 50); 
            } else {
                // Печать закончена
                isTyping = false;
                currentPhraseIndex = (currentPhraseIndex + 1) % phrases.length;
                
                // НОВОЕ: Убираем класс анимации -> картинка останавливается
                charImage.classList.remove('is-talking');
            }
        }
        typeChar();
    }

    window.onload = startTyping;
</script>

</body>
</html>
